{
  "hash": "bc1efedd1d1ae3ef0435f994ce100db2",
  "result": {
    "markdown": "---\ntitle: Build a blog with Quarto, Git, and RStudio\nauthor: 'Catherine Kim'\ndate: '2022-11-03'\nslug: quarto-blog\ncategories: [website]\ntags: [R, RStudio, git, GitHub, quarto]\n---\n\n\nWe will be covering some basics of multiple programming skills (Git/GitHub, R, Markdown, etc...) with the aim of empowering people to contribute to quarto websites such as this one - the **Brisbane Spatial Share Community of Practice**. The idea is to encourage community members to contribute material directly instead of funneling everything through a website administrator.\n\nBackground of the Community of Practice with founder, [Mitchel Rudge](https://twitter.com/MitchRudge). See the [About](/about.qmd) page for more info.\n\nSo the group already has a [website](https://geospatial-community.netlify.app/)... why another blog? Essentially, we found `blogdown` to be buggier than we wanted. Also, the folder structure was not very intutitive and are unique to each `hugo` theme. Finally, for the needs of our **Spatial Share** group the multi-lingual aspects of quarto were an important draw.\n\n![The quarto hex sticker. A blue hexagon with the quarto logo and quarto written in white, lower-case letters. Credit: RStudio](images/quarto.png)\n\n## Research Bazaar Queensland 2022\n\nThis session was run as a workshop for [ResBaz Queensland 2022](https://resbaz.github.io/resbaz2022qld/). ResBaz is a global festival promoting digital literacy at the centre of modern research.\n\nWhat we will cover:\n\n1.  Quarto basics\n2.  Git and GitHub basics\n3.  How to create/edit a post on a quarto website\n\nI have pieced this together using many other resources on the above which are mentioned throughout. This is also coming from a learning-as-we-go approach and by no means expert opinion. Thank you to Mitch and Christina for their help with this tutorial and workshop!\n\nWhat you will need:\n\n-   Installations - [Git](https://git-scm.com/downloads), R [Windows](https://cran.r-project.org/bin/windows/base/) [mac](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwjLh9_yp5n7AhX27zgGHVQ9BSgQFnoECBoQAQ&url=https%3A%2F%2Fcran.r-project.org%2Fbin%2Fmacosx%2F&usg=AOvVaw3WMiY1ueFQVBx_EVXIaVqG), [RStudio](https://posit.co/download/rstudio-desktop/) (Quarto should be installed included with recent \\>2022.07 versions of RSTudio - otherwise [download Quarto](https://quarto.org/docs/get-started/) separately)\n-   [GitHub](https://www.github.com) account (free) with your login and personal access token (PAT) details handy\n-   [Netlify](https://www.netlify.com/) account (free)\n\n## Creating a blog with quarto\n\n### What is quarto?\n\nQuarto is a \"multi-language, next-generation version of R markdown from RStudio.\" It is designed to be programming language (compatible with R, python, Julia, and more...?) and tool agnostic (RStudio, VSCode, jupyter, Observable). In this tutorial, we are focusing on **Quarto** and **RStudio**.\n\nThe basic model of Quarto publishing is taking a source document and rendering it to a variety of outputs like html, pdfs, and Word. The backend process is illustrated below. The key difference from R Markdown is that it uses **pandoc**. For those interested in the details, I would recommend the [Welcome to Quarto! 2 hr workshop](https://www.youtube.com/watch?v=yvi5uXQMvu4) on Youtube led by Tom Mock at RStudio.\n\n![](https://quarto.org/docs/get-started/hello/images/rstudio-qmd-how-it-works.png)\n\n[FAQ](https://quarto.org/docs/faq/rmarkdown.html) for R Markdown users.\n\n### Make a quarto blog in RStudio\n\nRStudio has quarto built-in with recent versions after 2022.07. Go to `File > New Project` or the R in a blue cube under 'Edit' and you will see Quarto options right there!\n\n![](images/quarto-new-qproj.png)\n\nLet's click on the `Quarto Blog` option. In the next window, name you project (e.g., myblog), select where to save the project with the `Browse` button, and ensure 'Create a git repository' is checked. More on git later.\n\n![](images/quarto-new-git.png)\n\nThe default project is populated with some example files and folders. The open `index.qmd` file is the 'home page' of the blog that will list all the posts. The `.qmd` is the file extension for a Quarto file just like `.Rmd` for R Markdown. Go ahead and change the first `title` field in the YAML. For instance, change 'my blog' to 'My Blog'.\n\n::: callout-note\nYAML stands for 'Yet Another Markup Language' and is delineated by a triple dash (---) at the beginning and end of the YAML section. This is where you define settings for you quarto document/post.\n:::\n\nNow, let's look at one of the template posts. In the `Files` pane click on `posts > welcome > index.qmd`. Here we can see a template for a 'Welcome' post.\n\nA recent addition to RStudio is that you can view the 'Source' (top left pane) as either the **Source code** or **Visual editor**. These views can be swapped by toggling the buttons at the top right of the pane. The Source code (blue box below) displays all the source code for your quarto file such are your R code (in chunks - none in this example) and Markdown narrative text.\n\n::: callout-note\nA code chunck is delineated by three backticks (button to the left of 1) and {} with the language for the code chunk (R, python etc.). Click the green `C+` button to the left of run to add a new R chunck. Or keyboard shortcut `Ctrl/Cmd + Alt + I`.\n:::\n\n![](images/quarto-source-visual.png)\n\nThe Visual editor displays a rendered version of your quarto file - more like what it will look like when the site is published. This is more similar to writing in a text editor like Word. You can also see there some extra formatting buttons in the Visual Editor like **bold**/*italics* and super/subscripts. The 'Table' function is also a welcome edition as formatting tables in Markdown is very finicky and tedious.\n\nTry inserting a table or super/subscript (Format \\> Text \\> Strikethrough/Superscript/Subscript/Smallcaps) in the Visual editor and then toggle to the Source code. Now you can see the associated Markdown code for whatever you just did! Super handy.\n\nNow, open the `_quarto.yml` file. Here we can see the project type (a website), some website formatting (the navigation bar), and some other customization fields. Update the `title` field to match the title we edited earlier. In my case, it was 'My Blog'. Feel free to edit other fields such as your GitHub, Twitter, LinkedIn profile links etc. You can also change the theme to one of many built-in [themes](https://quarto.org/docs/websites/website-blog.html#themes).\n\n![](images/quarto_quarto-yml.png)\n\n> Don't forget to save your files when you make changes. If the file name in the tab is red - that means you have unsaved changes.\n\n::: callout-note\nDon't forget to save your files when you make changes. If the file name in the tab is red - that means you have unsaved changes.\n:::\n\nThe Visual editor is pretty cool, but it's not exactly the same as previewing your website before publishing. Click on the `Render` button at the top and see what happens.\n\nA preview of your blog should have popped-up in a web browser. You can navigate like you would a website to see all the features. Go to the about page - we can see it is the default page with the Quarto blog project. If you'd like, open the `about.qmd` page in the project directory and make a change. Add some text, delete a link (like LinkedIn) and then save your changes.\n\nCongrats - you've made a blog!\n\n![Celebrate! Credit: http://www.reactiongifs.com/cheering-minions/](https://i1.wp.com/justmaths.co.uk/wp-content/uploads/2016/10/celebration-gif.gif)\n\nIn the top right view pane of RStudio, you can see `Render` and `Background Jobs` tabs. If you'd like to get an idea of what is happening in the background, check out these tabs. In the `Backgroun Jobs` tab, there is a red stop sign in the top right corner to stop previewing your site.\n\nBut how do I share it with the world?? First, we will need to version control our project with git and store it in a remote repository.\n\n## Git - what is it?\n\nA **version control software** (think track changes) useful for collaborating on and sharing code.\n\nGit is the *software itself* that records changes to a set of files locally. There are several hosting platforms that are like online repositories (think Dropbox, Google Drive, etc.) that work with Git: Bitbucket, GitLab, and GitHub to name a few.\n\nThese platforms not only allow for version control but also to collaborate, organize, and back up projects.\n\n![](https://raw.githubusercontent.com/allisonhorst/stats-illustrations/main/github-illustrated-series/github_wickham_bryan_git_quote.png){fig-alt=\"On the left is a quote from Hadley Wickham and Jenny Bryan that says 'Using a Git commit is like using anchors and other protection when climbing...if you make a mistake you can't fall past the previous commit. Commits are also helpful to others, because they show your journey, not just the destination.' On the right, two little monsters climb a cliff face. Their ropes are secured by several anchors, each labeled 'Commit'. Three monsters on the ground support the climbers.\"}\n\nIn this case, we will be using **GitHub** to access the website files, make some changes (i.e., add a post), and then incorporate those changes back to the website repository on GitHub which will automatically update the website itself. ðŸ™Œ\n\nThere are lots of fabulous and free resources online that go more into depth on Git:\n\n-   If you need to be convinced to use Git for version control see this [article](https://peerj.com/preprints/3159v2/) and [Happy Git and GitHub for the useR](https://happygitwithr.com/index.html) to git started both by Git/R guru Jenny Bryan.\n-   See Caitie Kuempel's R Ladies Brisbane [presentation](https://github.com/cdkuempel/getting_started_github) on getting started with GitHub in RStudio.\n\n### Git Terminology\n\n**Repository/repo** - where a project is stored in GitHub. Think of it like a folder holding all the relevant documents that you can version control, view history, and add collaborators. The repository or repo holds all the relevant files for the website - most of which we will not touch.\n\n**Commit** - is one or more changes to a file or set of files that you are asking GitHub to keep track of.\n\n**Push** - sending your committed changes to a remote repository on GitHub. Local changes updated on the GitHub website where other people can access.\n\n**Pull** - incorporating and merging changes. An edit on the remote repository on GitHub can be pulled to a local repository.\n\n**Diff** - difference, or changes made that are visible as insertions/deletions for a commit.\n\n**Main** - the default branch you are on. Master has recently updated to main, but they are the same thing. You are more likely to come across master on older resources. [Jenny Bryan](https://happygitwithr.com/git-branches.html) strongly urges you to create a new **branch** to work off of which requires using command line. For the purpose of contributing to a quarto website, I will forgo covering this as it is unlikely more than one person will be contributing at the same time.\n\n**Origin** - the remote repo online from which you have cloned your local copy from.\n\n![How committing goes... Credit: xkcd comics](https://imgs.xkcd.com/comics/git_commit.png)\n\n### Usethis on our blog project\n\n::: callout\n[Happy Git and GitHub for the useR](https://happygitwithr.com) is the online bible of using git with R by legendary Jenny Bryan. This book covers all the basics in details and provides workflows and troubleshooting Jenny Bryan has a whole chapters on what is covered below. [Ch 7 Configure Git](https://happygitwithr.com/hello-git.html#hello-git), [Ch 9 PATs](https://happygitwithr.com/https-pat.html), and [Ch 17.3 Create and connect a GitHub repo](https://happygitwithr.com/existing-github-last.html#create-and-connect-a-github-repo). It's an excellent resource that I would highly encourage you to check out.\n:::\n\n`Usethis` is a workflow package designed to automate repetitive tasks for package development and project setup. Here, we'll be using it for the latter.\n\n::: callout-note\nYou might need to install `usethis`. Check by search in the `Packages` window in the bottom right pane in RStudio.\n\n`install.packages(\"usethis\")`\n\n`library(usethis)`\n\nOr you can install the development version: `install.packages(\"devtools\")` if you don't have devtools. devtools::install_github(\"r-lib/usethis\")\n:::\n\n#### Configure Git\n\nIf you have never used Git before you will need to configure your account. We can do this in R with `usethis` using your GitHub username and email. *These **must** be the details associated with your GitHub account. You will only need to do this once.*\n\n`usethis::use_git_config(user.name = \"Jane Doe\", user.email = \"jane@example.org\")`\n\nIf you are not sure if you have configured Git, you can check with running `usethis::edit_git_config()` in the console. This will open your `.gitconfig` file and you can check the `[user]` details. If these are not right you can go ahead and change theme in the file and save.\n\n![](images/gitconfig-user.png){fig-alt=\"Screenshot of the `user` information found in the `.gitconfig` file opened using `usethis::edit_git_config()`.\"}\n\n#### Create a personal access token\n\nWe must also configure a **personal access token** or **PAT** with `usethis`. Type `usethis::create_github_token()` in the console. You will either need to log into GitHub or confirm your password. `usethis` will automatically select some scopes - which ones are selected? We can use these defaults - click the big, green `Generate token` button at the bottom.\n\nLeave this page open or copy this and keep it a text file/password manager. We will use it again later. You can even use `gitcreds::gitcreds_set()` to store your PAT now.\n\n::: callout\nWe can also save our PAT in RStudio with: `gitcreds::gitcreds_set()`\n\nThis should result in the following message. Enter password or token: ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nAdding new credentials...\n\nRemoving credentials from cache...\n\nDone.\n:::\n\n#### Setup the remote GitHub repository\n\nNow let's setup a remote repo on GitHub using `usethis::use_github`. This section is straight out of [17.3 Happy git with R - create and connect a github repo with usethis](https://happygitwithr.com/existing-github-last.html##create-and-connect-a-github-repo).\n\nHow did that go? Did you get an error?\n\nDon't worry. We've forgotten to do an **initial commit** a common mistake. Click on the `Commit` button in the `Git` pane, select all (`Ctrl/Cmd + Shift + A`) and click `Stage`. We are going to stage all the files to **push** to our remote GitHub repo. This might be a bit slow since it is multiple files so be patient. Then, make a commit message in the top right of the window. Click `Commit`. This creates a record (or anchor in line with the climbing analogy below) in our project that we can view and go back to if we ever need to.\n\n![](https://raw.githubusercontent.com/allisonhorst/stats-illustrations/main/github-illustrated-series/github_clip.png){fig-alt=\"A close-up rear view of a monster climbing a rock face, clicking into an anchor point, with the word 'Click!'.\"}\n\nOnce that's complete, let's `usethis::use_github()` in the `Console` again. How did it go this time?\n\nHopefully, you see something like this: ![](images/git-initial-commit.png)\n\nNotice that part of what `use_github()` does is **push** the master or **main** branch to GitHub. (Master is legacy, but you may still see it around.)\n\nNow go to the link there `use_github()` set the remote too (in the third line with a âœ”ï¸). You will see everything that you've commited is now in the online, **remote repo**! Have a look around. You can navigate, add a README.md file, and even edit files in GitHub.\n\nLet's go ahead and edit a file. Go to the 'Welcome' post, click on the pencil âœï¸ to edit, and make a change. At the bottom you can add a commit message then commit your change.\n\nCool, but how do we get these changes we made on our remote repo into our local repo on our computer? This is where **pull** comes in. Back in the RStudio Git pane, you should see a blue down arrow labelled `Pull`. Click this button. This will update your local repo on your computer with the edit we made in GitHub. Look at your files and see if you can find the change we just made online. Pulling is especially important if you are working on a collaborative project. In general, you want to **pull** **first before pushing** to ensure you are working with the most up-to-date version of the project. Even if you are not in a collaborative project, it is a good habit to get into.\n\nThose are the Git basics! In general, you want to use the following workflow when using git.\n\n1.  Make a change in your files and **save**. The changes will not show up in the Git pane unless you save the changes.\n2.  **Stage** the files you would like to commit. Can stage multiple files at a time.\n3.  Write a concise, informative **commit** message and press the `Commit` button. If you don't get any glaringly obvious Error messages, it's probably all good.\n4.  **Pull** pressing the blue down arrow before **pushing** with the green up arrow.\n5.  Repeat!\n\n## Publishing\n\nThere are several options for publishing your quarto blog outlined [here](https://quarto.org/docs/publishing/). Such as [Quarto Pub](https://quarto.org/docs/publishing/quarto-pub.html) and Netlify.\n\n::: callout-note\nQuarto Pub is a free publishing service for quarto content. It requires having a login and an access token. This is a relatively straight forward way to get your blog online. There are some limitations to the size and everything published on Quarto Pub is **publicly visible**. The link above outlines the steps to publish with Quart Pub. This method does not involve using git.\n:::\n\nFor this workshop, we will focus on Netlify. In your Netlify account, click on the teal `Add new site` button.\n\nImport an existing project from a GitHub repository. You will probably need to configure your Netlify on GitHub. Can either configure all repositories or pick a specific repository.\n\n![](images/pub-configure-netlify-github.png)\n\nAuthorize Quarto to access Netlify.\n\n![](images/pub-netlify-authorize.png)\n\nNow that we've connected our GitHub to Netlify, go to the Site settings. At the bottom 'Publish directory' section put the `_site/` folder where your website is rendered.\n\n![](images/pub-dir-netlify.png)\n\nIt will take a few minutes to deploy your website. Netlify automatically generates a random url like \"lighthearted-travesseiro-492jfg3\" which can be changed in the 'Domain settings'. Or course, you can also use/pay for a custom url to remove the 'netlify.app' at the end of the url.\n\nNow, make a change in the welcome post, render the site, commit the changes, and push the changes in the `.qmd` file. Look at your GitHub remote repo to check that the changes are there. Now check your website - did it update as well?\n\nAs we defined above, unless you also commited the updated contents of the **`_site/`** foldr the website will not have updated. This folder is where all the rendered outputs are that are used to build the site on Netlify. Commit the updated `_site/` folder and push. Now check your website again.\n\n![Cheers](https://media.giphy.com/media/8Iv5lqKwKsZ2g/giphy.gif){fig-alt=\"Leonardo DeCaprio in the Great Gatsby cheersing with a drink with fireworks in the background. Credit: Sony.\"}\n\n## Add a map\n\nThis is a spatial community of practice - let's add a map of ResBazQld 2022 to a post using [leaflet](https://www.earthdatascience.org/courses/earth-analytics/get-data-using-apis/leaflet-r/).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"leaflet\")\nlibrary(leaflet)\nlibrary(magrittr)\nleaflet() %>% \n  addTiles() %>% # default background map\n  addMarkers(lat = -27.552, lng = 153.0535,\n             popup = \"Location of ResBazQld 2022\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-62611aaabdcf0e1cd7a4\" style=\"width:100%;height:464px;\" class=\"leaflet html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-62611aaabdcf0e1cd7a4\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[-27.552,153.0535,null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},\"Location of ResBazQld 2022\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[-27.552,-27.552],\"lng\":[153.0535,153.0535]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Troubleshooting TBC\n\n## Resources\n\n**Quarto**\n\n-   Building a blog with quarto, [Youtube video](https://www.youtube.com/watch?v=CVcvXfRyfE0), [website](https://ivelasq.quarto.pub/building-a-blog-with-quarto/intro.html) - Isabella Valasquez, Rstudio\n-   [Welcome to Quarto!](https://www.youtube.com/watch?v=yvi5uXQMvu4), Tom Mock, RStudio\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/jquery-1.12.4/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\r\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\r\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\r\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/leaflet-binding-2.1.1/leaflet.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}